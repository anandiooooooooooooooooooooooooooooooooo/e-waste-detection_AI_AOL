<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Processing - E-Waste Detector</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../globals.css">

  <style>
    /* Smooth rotating ring */
    .rotate-slow {
      animation: spin 3s linear infinite;
    }

    /* Pulse effect for the scanner ring */
    .pulse-ring {
      animation: pulse 2s ease-in-out infinite;
    }

    /* Floating particle motion */
    .float {
      animation: float 3s ease-in-out infinite;
    }

    /* Progress bar animation */
    .progress-bar {
      width: 0%;
      animation: progress 4s ease-in-out forwards;
    }

    /* Scanner line motion */
    .scan-line {
      animation: scan 2s linear infinite;
    }

    /* Keyframes */
    @keyframes spin {
      100% {
        transform: rotate(360deg);
      }
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 0.2;
        transform: scale(1);
      }

      50% {
        opacity: 0.8;
        transform: scale(1.1);
      }
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-8px);
      }
    }

    @keyframes progress {
      0% {
        width: 0%;
      }

      100% {
        width: 100%;
      }
    }

    @keyframes scan {
      0% {
        transform: translateY(-100%);
      }

      100% {
        transform: translateY(100%);
      }
    }
  </style>
</head>

<body
  class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 min-h-screen flex items-center justify-center p-4">

  <div class="w-full max-w-md">
    <!-- Main Container -->
    <div class="text-center">

      <!-- Animated Scanner -->
      <div class="mb-12 flex justify-center">
        <div class="relative w-32 h-32">
          <!-- Outer rotating ring -->
          <div
            class="absolute inset-0 rounded-full border-2 border-transparent border-t-green-500 border-r-green-500 rotate-slow">
          </div>

          <!-- Middle pulsing ring -->
          <div class="absolute inset-2 rounded-full border border-green-500 opacity-50"></div>

          <!-- Inner scanner -->
          <div
            class="absolute inset-4 rounded-full bg-gradient-to-b from-green-500/20 to-transparent flex items-center justify-center overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-b from-green-400 to-transparent opacity-30 scan-line"></div>
            <svg class="w-12 h-12 text-green-400" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" />
            </svg>
          </div>

          <!-- Pulse rings -->
          <div class="absolute inset-0 rounded-full border border-green-500 pulse-ring"></div>
        </div>
      </div>

      <!-- Status Text -->
      <h2 class="text-3xl font-bold text-white mb-2">Analyzing E-Waste</h2>
      <p class="text-slate-400 mb-8 text-sm">Our AI is scanning your image for components and materials...</p>

      <!-- Progress Bar -->
      <div class="mb-8">
        <div class="h-1 bg-slate-700 rounded-full overflow-hidden">
          <div class="h-full bg-gradient-to-r from-green-500 to-emerald-400 progress-bar"></div>
        </div>
      </div>

      <!-- Processing Steps -->
      <div class="space-y-3 mb-8">
        <div class="flex items-center gap-3 text-slate-300">
          <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
          <span class="text-sm">Detecting components...</span>
        </div>
        <div class="flex items-center gap-3 text-slate-400">
          <div class="w-2 h-2 rounded-full bg-slate-600"></div>
          <span class="text-sm">Analyzing materials...</span>
        </div>
        <div class="flex items-center gap-3 text-slate-400">
          <div class="w-2 h-2 rounded-full bg-slate-600"></div>
          <span class="text-sm">Calculating value...</span>
        </div>
      </div>

      <!-- Floating particles -->
      <div class="flex justify-center gap-4 mb-8">
        <div class="w-2 h-2 rounded-full bg-green-500 float" style="animation-delay: 0s;"></div>
        <div class="w-2 h-2 rounded-full bg-green-400 float" style="animation-delay: 0.5s;"></div>
        <div class="w-2 h-2 rounded-full bg-emerald-500 float" style="animation-delay: 1s;"></div>
      </div>

      <!-- Estimated time -->
      <p class="text-xs text-slate-500">This usually takes about 5 seconds...</p>
    </div>
  </div>

  <script>
    // Step progress animation
    const steps = document.querySelectorAll('.flex.items-center.gap-3');
    let currentStep = 0;

    const updateSteps = () => {
      steps.forEach((step, index) => {
        const dot = step.querySelector('.w-2');
        if (index <= currentStep) {
          step.classList.add('text-slate-300');
          step.classList.remove('text-slate-400');
          dot.classList.add('bg-green-500', 'animate-pulse');
          dot.classList.remove('bg-slate-600');
        } else {
          step.classList.remove('text-slate-300');
          step.classList.add('text-slate-400');
          dot.classList.remove('bg-green-500', 'animate-pulse');
          dot.classList.add('bg-slate-600');
        }
      });
    };

    // Change steps every 1.5s
    const stepInterval = setInterval(() => {
      if (currentStep < steps.length - 1) {
        currentStep++;
        updateSteps();
      } else {
        clearInterval(stepInterval);
      }
    }, 1500);

    // Fake processing delay, then redirect
    window.addEventListener("load", async () => {
      const uploaded = sessionStorage.getItem("uploadedImagePath");
      if (!uploaded) {
        alert("No uploaded image found! Returning to home.");
        window.location.href = "index.html";
        return;
      }

      // Wait 5 seconds to simulate AI processing
      await new Promise(resolve => setTimeout(resolve, 5000));

      // Redirect to result page
      window.location.href = "result.html";
    });
  </script>
</body>

</html>
